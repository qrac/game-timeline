.timeline {
  --timeline-bar-offset: 24px;
  --timeline-bar-width: 4px;
  --timeline-year-font-size: 1.5rem;
  --timeline-sub-column-width: 30%;
}

.timeline {
  background-color: var(--theme-bg-2);
}

.timeline-container {
  max-width: var(--pj-app-max-width);
  margin: 0 auto;
  padding-top: var(--pj-timeline-offset);
  padding-right: var(--pj-timeline-offset);
  padding-bottom: var(--pj-timeline-offset);
  padding-left: calc(
    var(--pj-timeline-offset) - var(--timeline-bar-offset) / 6
  );
  background-color: var(--theme-bg-2);
  transition: opacity 0.4s ease-in-out, translate 0.4s ease-in-out,
    display 0.4s allow-discrete;
}

.timeline-container:not(.is-active) {
  display: none;
  translate: 0 32px;
  opacity: 0;
}

@starting-style {
  .timeline-container {
    opacity: 0;
    translate: 0 32px;
  }
}

.timeline-contents {
  position: relative;
  padding-left: var(--timeline-bar-offset);
}

.timeline-bar {
  position: absolute;
  top: calc(0px + var(--timeline-year-font-size) / 2);
  left: calc(var(--timeline-bar-offset) / 2);
  width: var(--timeline-bar-width);
  height: calc(100% - var(--timeline-year-font-size) / 2);
  background-color: var(--theme-tx-2);
  translate: -50% 0;
}

.timeline-years > * + * {
  margin-top: 1.5rem;
}

.timeline-year:last-child .timeline-year-columns {
  margin-bottom: 0;
}

.timeline-year-title {
  position: relative;
  font-size: var(--timeline-year-font-size);
  font-family: var(--font-sans-en);
  font-weight: 900;
  line-height: 1;
}

.timeline-year-title::before {
  content: "";
  position: absolute;
  top: 50%;
  right: calc(100% + var(--timeline-bar-offset) / 2);
  width: 1rem;
  height: 1rem;
  background-color: var(--theme-bg-2);
  border: var(--timeline-bar-width) solid var(--theme-tx-2);
  border-radius: 9999em;
  translate: 50% -50%;
  z-index: 2;
}

.timeline-year-title::after {
  content: "";
  position: absolute;
  top: 50%;
  right: 0;
  width: 100%;
  height: 80%;
  background-color: var(--theme-bg-3);
  translate: 0 -50%;
  z-index: 1;
}

.timeline-year-title-text {
  position: relative;
  display: block;
  width: fit-content;
  padding-right: 0.25em;
  background-color: var(--theme-bg-2);
  z-index: 3;
}

.timeline-year-columns {
  display: flex;
  gap: 1rem;
  margin: 1.125rem 0;
  padding-left: 0.25rem;
}

.timeline-year-column.is-main {
  flex: 1 0;
}

.timeline-year-column.is-sub {
  flex: none;
  width: var(--timeline-sub-column-width);
}

.timeline-year-column.is-separate.is-main > *:not(:last-child) {
  margin-bottom: calc(0.75rem * 2 + 1px);
}

.timeline-year-column.is-separate.is-main > *:not(:last-child)::after {
  content: "";
  position: absolute;
  top: calc(100% + 0.75rem);
  left: 14px;
  width: calc(100% - 14px);
  height: 0;
  border-bottom: 1px solid var(--theme-bd-1);
}

.timeline-year-column.is-separate.is-sub > *:not(:last-child) {
  margin-bottom: calc(0.5rem * 2 + 1px);
}

.timeline-year-column.is-separate.is-sub > *:not(:last-child)::after {
  content: "";
  position: absolute;
  top: calc(100% + 0.5rem);
  right: 0;
  width: 100%;
  height: 0;
}

.timeline-blank {
  display: grid;
  place-items: center;
  min-height: 70vh;
  margin-top: calc(var(--pj-timeline-offset) * -1);
  margin-right: calc(var(--pj-timeline-offset) * -1);
  margin-bottom: calc(var(--pj-timeline-offset) * -1);
  margin-left: calc(
    (var(--pj-timeline-offset) - var(--timeline-bar-offset) / 6) * -1
  );
  padding: 20px;
}

.timeline-controller {
  position: fixed;
  bottom: calc(var(--pj-timeline-offset) * 1.5);
  left: 50%;
  height: var(--pj-controller-height);
  background: var(--theme-bg-1);
  border-radius: 14px;
  box-shadow: 0 4px 12px 0px rgba(0, 0, 0, 0.3);
  translate: -50% 0;
  overflow: hidden;
  z-index: 10;
}

.timeline-controls {
  display: flex;
  gap: 4px;
}

.timeline-controls > .button,
.timeline-controls > .input {
  flex: none;
  border-radius: 0;
}

.timeline-controls > .button {
  width: var(--pj-controller-height);
  height: var(--pj-controller-height);
  padding: 0;
}

.timeline-controls > .input {
  width: 5em;
  padding-right: 0;
  padding-left: 0;
  height: var(--pj-controller-height);
}

.timeline-control-icon {
  width: 20px;
  height: 20px;
}
